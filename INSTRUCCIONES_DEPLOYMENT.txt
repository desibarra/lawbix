# ============================================================
# LAWBiX - INSTRUCCIONES DE DEPLOYMENT A PRODUCCIÃ“N
# Hostinger: lawbix.creceseonline.com
# ============================================================

## âœ… PASO 1: IMPORTAR BASE DE DATOS (HACER AHORA)

### Accede a phpMyAdmin:
URL: https://auth-db1169.hstgr.io/index.php?db=u559395594_lawbix
Usuario: u559395594_lawbix
ContraseÃ±a: mR+0y7lV/B65

### Importa los archivos SQL:

1. Clic en "Import" (Importar)
2. Selecciona: backend/database/schema.sql
3. Clic en "Go" (Ejecutar)
4. âœ… Verifica que se crearon 8 tablas

5. Clic en "Import" nuevamente
6. Selecciona: backend/database/seed_demo.sql
7. Clic en "Go"
8. âœ… Verifica que hay datos en la tabla "users"

## âœ… PASO 2: OBTENER OPENAI API KEY (IMPORTANTE)

1. Ve a: https://platform.openai.com/api-keys
2. Inicia sesiÃ³n o crea cuenta
3. Clic en "Create new secret key"
4. Copia la key (empieza con sk-proj-...)
5. GuÃ¡rdala en un lugar seguro

## âœ… PASO 3: CONFIGURAR BACKEND

### Edita el archivo: backend/.env

Abre: c:\Users\desib\Documents\lawbix\backend\.env

Busca la lÃ­nea:
OPENAI_API_KEY=sk-proj-TU_OPENAI_API_KEY_AQUI

ReemplÃ¡zala con tu API key real:
OPENAI_API_KEY=sk-proj-TU_KEY_REAL_COPIADA_DEL_PASO_2

Guarda el archivo.

## âœ… PASO 4: COMPRIMIR ARCHIVOS PARA SUBIR

### Backend (ejecuta en PowerShell):

cd c:\Users\desib\Documents\lawbix\backend

# Comprimir archivos necesarios
Compress-Archive -Path "app.js","server.js","package.json","package-lock.json","controllers","routes","middlewares","database","services","storage","templates","config",".env" -DestinationPath "..\lawbix-backend-production.zip" -Force

### Frontend (ya estÃ¡ compilado en dist/):

cd c:\Users\desib\Documents\lawbix\frontend

# Comprimir el build
Compress-Archive -Path "dist\*" -DestinationPath "..\lawbix-frontend-production.zip" -Force

## âœ… PASO 5: SUBIR BACKEND A HOSTINGER

### Via File Manager (hPanel):

1. Accede a hPanel de Hostinger
2. Files â†’ File Manager
3. Navega a: /domains/lawbix.creceseonline.com/
4. Crea carpeta "backend" (si no existe)
5. Entra a la carpeta "backend"
6. Sube el archivo: lawbix-backend-production.zip
7. Clic derecho â†’ Extract (Extraer)
8. Elimina el .zip

### Via SSH (Alternativa):

ssh u559395594@lawbix.creceseonline.com
cd ~/domains/lawbix.creceseonline.com/backend
# Luego sube con SFTP usando FileZilla o WinSCP

## âœ… PASO 6: INSTALAR DEPENDENCIAS DEL BACKEND

### Via SSH:

ssh u559395594@lawbix.creceseonline.com
cd ~/domains/lawbix.creceseonline.com/backend
npm install --production

## âœ… PASO 7: CONFIGURAR NODE.JS APP EN HOSTINGER

1. hPanel â†’ Advanced â†’ Node.js
2. Clic en "Create Application"
3. ConfiguraciÃ³n:
   - Node.js version: 18.x o superior
   - Application mode: Production
   - Application root: /domains/lawbix.creceseonline.com/backend
   - Application URL: lawbix.creceseonline.com
   - Application startup file: server.js
   - Port: 3001

4. Environment Variables (agregar todas estas):
   DB_HOST=localhost
   DB_USER=u559395594_lawbix
   DB_PASSWORD=mR+0y7lV/B65
   DB_NAME=u559395594_lawbix
   DB_PORT=3306
   PORT=3001
   NODE_ENV=production
   JWT_SECRET=dd8d55b1401eb0a540688f0f3b6b4465dbd4847b38e9b92f1d06ea67418201f80b96ae1ae63228b09bcbad2d8b4595969d86b10fdadc07aea70fd9a21e5b3f37
   OPENAI_API_KEY=TU_KEY_REAL_AQUI
   OPENAI_MODEL=gpt-4-turbo-mini

5. Clic en "Create"
6. Clic en "Start Application"

## âœ… PASO 8: SUBIR FRONTEND A HOSTINGER

### Via File Manager:

1. hPanel â†’ File Manager
2. Navega a: /domains/lawbix.creceseonline.com/public_html/
3. ELIMINA todos los archivos existentes en public_html
4. Sube el archivo: lawbix-frontend-production.zip
5. Extrae el contenido
6. Mueve TODO el contenido de la carpeta "dist" a public_html
7. Elimina la carpeta "dist" vacÃ­a y el .zip

## âœ… PASO 9: CREAR .HTACCESS

### Crea archivo en: /public_html/.htaccess

Contenido:

<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /
  RewriteRule ^index\.html$ - [L]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule . /index.html [L]
</IfModule>

<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/javascript application/json
</IfModule>

<IfModule mod_expires.c>
  ExpiresActive On
  ExpiresByType image/jpg "access plus 1 year"
  ExpiresByType image/jpeg "access plus 1 year"
  ExpiresByType image/png "access plus 1 year"
  ExpiresByType image/svg+xml "access plus 1 year"
  ExpiresByType text/css "access plus 1 month"
  ExpiresByType application/javascript "access plus 1 month"
</IfModule>

## âœ… PASO 10: ACTIVAR SSL/HTTPS

1. hPanel â†’ Security â†’ SSL
2. Selecciona: lawbix.creceseonline.com
3. Activa "Force HTTPS"
4. Espera 5-10 minutos

## âœ… PASO 11: VERIFICAR DEPLOYMENT

### Prueba Backend:
Visita: https://lawbix.creceseonline.com/api/health
Debe mostrar: {"status":"ok","timestamp":"...","service":"LAWBiX API"}

### Prueba Frontend:
Visita: https://lawbix.creceseonline.com
Debe cargar la pÃ¡gina de login

### Prueba Login:
Email: demo@lawbix.com
Password: demo123

## âœ… CHECKLIST FINAL

- [ ] Base de datos importada (schema.sql + seed_demo.sql)
- [ ] OPENAI_API_KEY obtenida y configurada
- [ ] Backend comprimido y subido
- [ ] Dependencias instaladas (npm install)
- [ ] Node.js App configurada y corriendo
- [ ] Frontend comprimido y subido a public_html
- [ ] .htaccess creado
- [ ] SSL/HTTPS activado
- [ ] Health check responde OK
- [ ] Login funciona

## ðŸš¨ TROUBLESHOOTING

### Si el backend no inicia:
ssh u559395594@lawbix.creceseonline.com
cd ~/domains/lawbix.creceseonline.com/backend
pm2 logs

### Si hay error de base de datos:
Verifica credenciales en .env y en hPanel Environment Variables

### Si el frontend muestra 404:
Verifica que .htaccess estÃ© en public_html/

## ðŸ“ž SOPORTE

Hostinger Support: https://www.hostinger.com/contact

============================================================
IMPORTANTE: Sigue los pasos EN ORDEN
============================================================
